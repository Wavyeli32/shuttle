<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Voting Results</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #3498db, #2980b9);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin-top: 70px;
        }

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            background-color: #333;
            padding: 10px;
            color: #fff;
            text-decoration: none;
            width: 100%;
            display: flex;
            justify-content: space-between;
        }

        .navbar a {
            color: #fff;
            margin: 0 15px;
            text-decoration: none;
        }

        h1 {
            background-color: #333;
            /* Header background color */
            color: #ffffff;
            /* Header text color */
            width: 100%;
            margin: 0;
        }

        #chart-container {
            width: 50%;
            margin: auto;
        }
    </style>
</head>

<body>

    <div class="navbar">
        <a href="Home.html">Home</a>
        <div class="contact-bar">
            <a href="contact.html">Contact Us</a>
            <a href="support.html">Support</a>
        </div>
    </div>

    <h1>E-Voting Results</h1>

    <div id="chart-container">
        <canvas id="vote-chart"></canvas>
    </div>

    

    <script>
        // Retrieve submitted votes from localStorage
        const submittedVotes = localStorage.getItem("votedCandidate");

        // Initialize vote counts
        let murielVotes = 1;
        let ericVotes = 0;

        // Update vote counts based on submitted votes
        if (submittedVotes) {
            if (submittedVotes === 'Muriel Bowser') {
                murielVotes++;
            } else if (submittedVotes === 'Eric Adams') {
                ericVotes++;
            }
        }

        const voteData = {
            labels: ['Muriel Bowser', 'Eric Adams'],
            datasets: [{
                label: 'Votes',
                data: [murielVotes, ericVotes], // Update vote counts here
                backgroundColor: [
                    'rgba(255, 99, 132, 0.6)', // Red for Muriel Bowser
                    'rgba(54, 162, 235, 0.6)', // Blue for Eric Adams
                ],
                borderWidth: 1
            }]
        };

        const voteChart = new Chart(document.getElementById('vote-chart'), {
            type: 'pie',
            data: voteData,
            options: {
                plugins: {
                    datalabels: { // Enable datalabels plugin
                        display: 'auto', // Display labels based on available space
                        color: '#fff',
                        formatter: (value) => { // Format label to display vote count
                            return value;
                        }
                    }
                }
            }
        });

    </script>
    

</body>

</html>



